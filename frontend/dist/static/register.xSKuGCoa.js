import{_ as e}from"./logo.BAsLpJV2.js";import{b as a}from"./vue-router.CWS0_WYm.js";import{_ as s,c as l,A as t,s as o,g as r,u as i,h as n}from"./index.BzyJV2mc.js";import{r as c,b as p,ag as m,H as d,o as u,I as g,Q as h,u as f,a as v,M as j,a4 as y,c as _,O as w}from"./@vue.CkPKv8Ma.js";import{E as b}from"./element-plus.iYbxkz79.js";import{P as k,B as x}from"./tsParticles.DuH2wWZJ.js";import"./axios.BEuh1VCq.js";import"./crypto-js.Cc_qfrXD.js";import"./clipboard.Dq8D7HKw.js";import"./js-cookie.Ch5AnFJE.js";import"./pinia.BlOZzj71.js";import"./@element-plus.Bd8ZSeX6.js";import"./nprogress.C05CkHze.js";import"./pinia-plugin-persistedstate.CT3HPKdK.js";import"./destr.WfmzGWA8.js";import"./deep-pick-omit.DP_A4OSP.js";import"./@tsparticles.xnORxQhz.js";import"./lodash-es.CUM784Py.js";import"./@vueuse.DLh4vTy9.js";import"./@popperjs.DxP-MrnL.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.qwFxEAt8.js";import"./async-validator.BTKOuuO-.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.DhpmN5Iz.js";const V=["src"],P=s({__name:"moduleRegisterForm",setup(e){const s=l(),i=window.location.origin;a();let n=c({username:"",password:"",captcha:"",captchaKey:null}),_=c(null),w=c({username:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7",trigger:"blur"}],password:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801",trigger:"blur"}],captcha:[{required:!0,message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",trigger:"blur"}]}),k=c(!1);function x(){t.getCaptcha().then((e=>{2e3==e.code?(n.value.captcha=null,n.value.captchaKey=e.data.key,_.value=e.data.image_base):b.error(e.msg)}))}let P=c(null);const C=()=>{return e=null,a=null,l=function*(){if(!k.value)try{k.value=!0,yield P.value.validate();const e=yield t.getToken(n.value);2e3===e.code?(o("logintoken",e.data.access),r("refreshtoken",e.data.refresh),s.userInfo.username=n.value.username,window.location.href=i+"/#/",b.success("\u767b\u5f55\u6210\u529f")):(b.error(e.msg||"\u767b\u5f55\u5931\u8d25"),x())}catch(e){e.fields?b.warning("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u767b\u5f55\u4fe1\u606f"):b.error("\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")}finally{k.value=!1}},new Promise(((s,t)=>{var o=e=>{try{i(l.next(e))}catch(a){t(a)}},r=e=>{try{i(l.throw(e))}catch(a){t(a)}},i=e=>e.done?s(e.value):Promise.resolve(e.value).then(o,r);i((l=l.apply(e,a)).next())}));var e,a,l};return p((()=>{x()})),(e,a)=>{const s=m("el-input"),l=m("el-form-item"),t=m("el-button"),o=m("el-form");return u(),d(o,{ref_key:"loginFormRef",ref:P,model:f(n),rules:f(w),"label-width":"0",size:"large",onKeyup:y(C,["enter"]),disabled:f(k)},{default:g((()=>[h(l,{prop:"username"},{default:g((()=>[h(s,{modelValue:f(n).username,"onUpdate:modelValue":a[0]||(a[0]=e=>f(n).username=e),"prefix-icon":"user",clearable:"",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},null,8,["modelValue"])])),_:1}),h(l,{prop:"password"},{default:g((()=>[h(s,{modelValue:f(n).password,"onUpdate:modelValue":a[1]||(a[1]=e=>f(n).password=e),"prefix-icon":"lock",clearable:"","show-password":"",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"},null,8,["modelValue"])])),_:1}),h(l,{prop:"captcha"},{default:g((()=>[h(s,{type:"text","prefix-icon":"circle-check",modelValue:f(n).captcha,"onUpdate:modelValue":a[2]||(a[2]=e=>f(n).captcha=e),modelModifiers:{trim:!0},"auto-complete":"off",placeholder:"\u9a8c\u8bc1\u7801"},{append:g((()=>[v("img",{class:"login-captcha",src:f(_),onClick:x},null,8,V)])),_:1},8,["modelValue"])])),_:1}),h(l,null,{default:g((()=>[h(t,{type:"primary",class:"login-btn",style:{width:"100%"},loading:f(k),round:"",onClick:C},{default:g((()=>a[3]||(a[3]=[j("\u6ce8\u518c")]))),_:1,__:[3]},8,["loading"])])),_:1})])),_:1},8,["model","rules","disabled"])}}},[["__scopeId","data-v-80ffaa90"]]),C={class:"login-container"},A={class:"background-layer"},E={class:"login-card"},T={class:"theme-toggle"},q={class:"login-content"},I={class:"brand-section"},z={class:"logo-wrapper"},K=["alt"],M={class:"card-footer"},R={class:"login-footer"},U={class:"copyright"},F={class:"version"},S=s({__name:"register",setup(s){const l=a(),t=i();function o(){t.setSiteTheme("light"===t.siteTheme?"dark":"light")}p((()=>{const e=document.querySelector("meta[name='viewport']")||document.createElement("meta");e.name="viewport",e.content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no",document.head.appendChild(e)}));const r=()=>{l.push("/login")};return(a,s)=>{const l=m("el-button"),i=m("el-tooltip"),c=m("el-link");return u(),_("div",C,[v("div",A,[h(k),s[0]||(s[0]=v("div",{class:"gradient-overlay"},null,-1))]),v("div",E,[v("div",T,[h(i,{content:"dark"==f(t).siteTheme?"\u5207\u6362\u81f3\u4eae\u8272\u6a21\u5f0f":"\u5207\u6362\u81f3\u6697\u8272\u6a21\u5f0f"},{default:g((()=>[h(l,{icon:"dark"==f(t).siteTheme?"sunny":"moon",circle:"",class:"theme-btn",onClick:o},null,8,["icon"])])),_:1},8,["content"])]),v("div",q,[v("div",I,[v("div",z,[v("img",{alt:f(n).APP_NAME,src:e,class:"logo-image"},null,8,K)]),s[1]||(s[1]=v("h1",{class:"app-name"},"\u7acb\u5373\u6ce8\u518c",-1)),s[2]||(s[2]=v("p",{class:"welcome-text"},"\u52a0\u5165\u6211\u4eec\u7684\u793e\u533a\uff0c\u5f00\u542f\u5168\u65b0\u4f53\u9a8c",-1))]),h(P)]),v("div",M,[s[4]||(s[4]=v("span",null,"\u5df2\u6709\u8d26\u6237\uff1f",-1)),h(c,{type:"primary",underline:!1,onClick:r},{default:g((()=>s[3]||(s[3]=[j("\u7acb\u5373\u767b\u5f55")]))),_:1,__:[3]})]),v("div",R,[v("p",U,[s[5]||(s[5]=j("\xa9 2025 lybbn All rights reserved. ")),v("span",F,"v"+w(f(n).APP_VER),1)])])]),h(x)])}}},[["__scopeId","data-v-1685ae11"]]);export{S as default};
