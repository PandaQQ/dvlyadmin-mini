import{_ as e}from"./logo.BAsLpJV2.js";import{_ as a,c as s,A as l,s as t,g as o,u as r,h as i}from"./index.BzyJV2mc.js";import{b as n}from"./vue-router.CWS0_WYm.js";import{r as c,b as d,ag as p,H as m,o as u,I as g,Q as h,u as f,a as v,M as j,a4 as _,c as y,O as b}from"./@vue.CkPKv8Ma.js";import{E as w}from"./element-plus.iYbxkz79.js";import{P as k,B as x}from"./tsParticles.DuH2wWZJ.js";import"./axios.BEuh1VCq.js";import"./crypto-js.Cc_qfrXD.js";import"./clipboard.Dq8D7HKw.js";import"./js-cookie.Ch5AnFJE.js";import"./pinia.BlOZzj71.js";import"./@element-plus.Bd8ZSeX6.js";import"./nprogress.C05CkHze.js";import"./pinia-plugin-persistedstate.CT3HPKdK.js";import"./destr.WfmzGWA8.js";import"./deep-pick-omit.DP_A4OSP.js";import"./@tsparticles.xnORxQhz.js";import"./lodash-es.CUM784Py.js";import"./@vueuse.DLh4vTy9.js";import"./@popperjs.DxP-MrnL.js";import"./@ctrl.D-8vaqgC.js";import"./dayjs.qwFxEAt8.js";import"./async-validator.BTKOuuO-.js";import"./memoize-one.Ds0C_khL.js";import"./normalize-wheel-es.BhHBPXsK.js";import"./@floating-ui.DhpmN5Iz.js";const P=["src"],V=a({__name:"modulePasswordForm",setup(e){const a=s(),r=window.location.origin;n();let i=c({username:"",password:"",captcha:"",captchaKey:null}),y=c(null),b=c({username:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d26\u53f7",trigger:"blur"}],password:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801",trigger:"blur"}],captcha:[{required:!0,message:"\u8bf7\u8f93\u5165\u9a8c\u8bc1\u7801",trigger:"blur"}]}),k=c(!1);function x(){l.getCaptcha().then((e=>{2e3==e.code?(i.value.captcha=null,i.value.captchaKey=e.data.key,y.value=e.data.image_base):w.error(e.msg)}))}let V=c(null);const A=()=>{return e=null,s=null,n=function*(){if(!k.value)try{k.value=!0,yield V.value.validate();const e=yield l.getToken(i.value);2e3===e.code?(t("logintoken",e.data.access),o("refreshtoken",e.data.refresh),a.userInfo.username=i.value.username,window.location.href=r+"/#/",w.success("\u767b\u5f55\u6210\u529f")):(w.error(e.msg||"\u767b\u5f55\u5931\u8d25"),x())}catch(e){e.fields?w.warning("\u8bf7\u586b\u5199\u6b63\u786e\u7684\u767b\u5f55\u4fe1\u606f"):w.error("\u767b\u5f55\u5931\u8d25\uff0c\u8bf7\u91cd\u8bd5")}finally{k.value=!1}},new Promise(((a,l)=>{var t=e=>{try{r(n.next(e))}catch(a){l(a)}},o=e=>{try{r(n.throw(e))}catch(a){l(a)}},r=e=>e.done?a(e.value):Promise.resolve(e.value).then(t,o);r((n=n.apply(e,s)).next())}));var e,s,n};return d((()=>{x()})),(e,a)=>{const s=p("el-input"),l=p("el-form-item"),t=p("el-button"),o=p("el-form");return u(),m(o,{ref_key:"loginFormRef",ref:V,model:f(i),rules:f(b),"label-width":"0",size:"large",onKeyup:_(A,["enter"]),disabled:f(k)},{default:g((()=>[h(l,{prop:"username"},{default:g((()=>[h(s,{modelValue:f(i).username,"onUpdate:modelValue":a[0]||(a[0]=e=>f(i).username=e),"prefix-icon":"user",clearable:"",placeholder:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"},null,8,["modelValue"])])),_:1}),h(l,{prop:"password"},{default:g((()=>[h(s,{modelValue:f(i).password,"onUpdate:modelValue":a[1]||(a[1]=e=>f(i).password=e),"prefix-icon":"lock",clearable:"","show-password":"",placeholder:"\u8bf7\u8f93\u5165\u5bc6\u7801"},null,8,["modelValue"])])),_:1}),h(l,{prop:"captcha"},{default:g((()=>[h(s,{type:"text","prefix-icon":"circle-check",modelValue:f(i).captcha,"onUpdate:modelValue":a[2]||(a[2]=e=>f(i).captcha=e),modelModifiers:{trim:!0},"auto-complete":"off",placeholder:"\u9a8c\u8bc1\u7801"},{append:g((()=>[v("img",{class:"login-captcha",src:f(y),onClick:x},null,8,P)])),_:1},8,["modelValue"])])),_:1}),h(l,null,{default:g((()=>[h(t,{type:"primary",class:"login-btn",style:{width:"100%"},loading:f(k),round:"",onClick:A},{default:g((()=>a[3]||(a[3]=[j("\u767b\u5f55")]))),_:1,__:[3]},8,["loading"])])),_:1})])),_:1},8,["model","rules","disabled"])}}},[["__scopeId","data-v-d9cf72c8"]]),A={class:"login-container"},C={class:"background-layer"},E={class:"login-card"},T={class:"theme-toggle"},q={class:"login-content"},z={class:"brand-section"},I={class:"logo-wrapper"},M=["alt"],K={class:"app-name"},U={class:"form-section"},F={class:"card-footer"},N={class:"login-footer"},R={class:"copyright"},S={class:"version"},B=a({__name:"index",setup(a){const s=n(),l=r();function t(){l.setSiteTheme("light"===l.siteTheme?"dark":"light")}d((()=>{const e=document.querySelector("meta[name='viewport']")||document.createElement("meta");e.name="viewport",e.content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no",document.head.appendChild(e)}));const o=()=>{s.push("/register")};return(a,s)=>{const r=p("el-button"),n=p("el-tooltip"),c=p("el-tab-pane"),d=p("el-tabs"),m=p("el-link");return u(),y("div",A,[v("div",C,[h(k),s[0]||(s[0]=v("div",{class:"gradient-overlay"},null,-1))]),v("div",E,[v("div",T,[h(n,{content:"dark"==f(l).siteTheme?"\u5207\u6362\u81f3\u4eae\u8272\u6a21\u5f0f":"\u5207\u6362\u81f3\u6697\u8272\u6a21\u5f0f"},{default:g((()=>[h(r,{icon:"dark"==f(l).siteTheme?"sunny":"moon",circle:"",class:"theme-btn",onClick:t},null,8,["icon"])])),_:1},8,["content"])]),v("div",q,[v("div",z,[v("div",I,[v("img",{alt:f(i).APP_NAME,src:e,class:"logo-image"},null,8,M)]),v("h1",K,b(f(i).APP_NAME),1),s[1]||(s[1]=v("p",{class:"welcome-text"},"\u6b22\u8fce\u56de\u6765\uff0c\u8bf7\u767b\u5f55\u60a8\u7684\u8d26\u6237",-1))]),v("div",U,[h(d,{class:"auth-tabs"},{default:g((()=>[h(c,{label:"\u8d26\u53f7\u5bc6\u7801\u767b\u5f55",lazy:""},{default:g((()=>[h(V)])),_:1})])),_:1})])]),v("div",F,[s[3]||(s[3]=v("span",null,"\u6ca1\u6709\u8d26\u6237\uff1f",-1)),h(m,{type:"primary",underline:!1,onClick:o},{default:g((()=>s[2]||(s[2]=[j("\u7acb\u5373\u6ce8\u518c")]))),_:1,__:[2]})]),v("div",N,[v("p",R,[s[4]||(s[4]=j("\xa9 2025 lybbn All rights reserved. ")),v("span",S,"v"+b(f(i).APP_VER),1)])])]),h(x)])}}},[["__scopeId","data-v-e24b61f6"]]);export{B as default};
